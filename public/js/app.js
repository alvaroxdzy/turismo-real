var RegionesYcomunas = {

  "regiones": [{
    "NombreRegion": "Arica y Parinacota",
    "comunas": ["Arica", "Camarones", "General Lagos" ,"Putre"]
  },
  {
    "NombreRegion": "Tarapacá",
    "comunas": ["Alto Hospicio", "Camiña", "Colchane", "Huara","Iquique", "Pica", "Pozo Almonte"]
  },
  {
    "NombreRegion": "Antofagasta",
    "comunas": ["Antofagasta", "Calama", "Mejillones", "María Elena", "Ollagüe", "Sierra Gorda", "San Pedro de Atacama", "Taltal", "Tocopilla"]
  },
  {
    "NombreRegion": "Atacama",
    "comunas": ["Alto del Carmen", "Copiapó", "Caldera", "Chañaral", "Diego de Almagro", "Freirina", "Huasco", "Tierra Amarilla", "Vallenar"]
  },
  {
    "NombreRegion": "Coquimbo",
    "comunas": ["Andacollo", "Canela", "Coquimbo", "Combarbalá", "Illapel", "La Serena", "La Higuera", "Los Vilos", "Monte Patria", "Ovalle", "Paiguano", "Punitaqui", "Río Hurtado", "Salamanca", "Vicuña"]
  },
  {
    "NombreRegion": "Valparaíso",
    "comunas": ["Algarrobo", "Cabildo", "Calera", "Catemu", "Casablanca", "Cartagena", "Calle Larga", "Concón", "El Quisco", "El Tabo", "Hijuelas", "Isla de Pascua", "Juan Fernández", "La Ligua", "Los Andes", "La Cruz", "Limache", "Llaillay", "Nogales", "Olmué", "Puchuncaví", "Papudo", "Petorca", "Panquehue", "Putaendo", "Quintero", "Quillota", "Quilpué", "Rinconada", "San Esteban", "San Antonio", "Santo Domingo", "San Felipe", "Santa María", "Valparaíso", "Viña del Mar", "Villa Alemana", "Zapallar"]
  },
  {
    "NombreRegion": "Región del Libertador Gral. Bernardo O’Higgins",
    "comunas": [ "Codegua", "Coinco", "Coltauco", "Chépica", "Chimbarongo", "Doñihue", "Graneros", "Las Cabras", "La Estrella", "Litueche", "Lolol", "Machalí", "Malloa", "Mostazal", "Marchihue", "Nancagua", "Navidad", "Olivar", "Peumo", "Pichidegua", "Palmilla", "Peralillo", "Placilla", "Pumanque", "Pichilemu", "Paredones",  "Quinta de Tilcoco", "Rancagua", "Rengo", "Requínoa", "San Vicente", "San Fernando", "Santa Cruz" ]
  },
  {
    "NombreRegion": "Región del Maule",
    "comunas": [ "ConsVtución", "Curepto", "Curicó", "Colbún", "Cauquenes", "Chanco", "Empedrado", "Hualañé", "Licantén", "Linares", "Longaví", "Maule", "Molina", "Parral", "Pelarco", "Pencahue", "Pelluhue", "Río Claro", "Rauco", "Romeral", "ReVro", "San Clemente", "San Rafael", "Sagrada Familia", "San Javier", "Teno", "Talca", "Vichuquén", "Villa Alegre", "Yerbas Buenas"]
  },
  {
    "NombreRegion": "Región del Biobío",
    "comunas": [ "Alto Biobío", "Antuco", "Arauco", "Bulnes", "Concepción", "Chillán", "Coronel", "Chiguayante", "Cañete", "Contulmo", "Curanilahue", "Cobquecura", "Coelemu", "Coihueco", "Chillán Viejo", "Cabrero", "El Carmen", "Florida", "Hualqui", "Hualpén", "Lota", "Lebu", "Los Álamos", "Los Ángeles", "Laja", "Mulchén", "Nacimiento", "Negrete", "Penco", "Pemuco", "Pinto", "Portezuelo", "Tirúa", "Quilaco", "Quilleco", "Quillón", "Quirihue", "Ránquil", "San Rosendo", "Santa Bárbara", "San Pedro de la Paz", "Santa Juana", "San Carlos", "San Fabián", "San Ignacio", "San Nicolás", "Tucapel", "Treguaco", "Talcahuano", "Tomé", "Ninhue", "Ñiquén", "Yumbel", "Yungay"]
  },
  {
    "NombreRegion": "Región de la Araucanía",
    "comunas": ["Angol", "Carahue", "Cunco", "Cholchol", "Curarrehue", "Collipulli", "Curacautín", "Ercilla", "Freire", "Galvarino", "Gorbea", "Lautaro", "Loncoche", "Lonquimay", "Los Sauces", "Lumaco", "Melipeuco", "Nueva Imperial", "Padre las Casas", "Perquenco", "Pitrufquén", "Purén", "Pucón", "Renaico", "Saavedra", "Teodoro Schmidt", "Traiguén", "Toltén", "Temuco", "Victoria", "Vilcún", "Villarrica" ]
  },
  {
    "NombreRegion": "Región de Los Ríos",
    "comunas": ["Corral", "Futrono", "Lanco", "La Unión", "Lago Ranco", "Los Lagos", "Máfil", "Mariquina", "Paillaco", "Panguipulli", "Río Bueno", "Valdivia"]
  },
  {
    "NombreRegion": "Región de Los Lagos",
    "comunas": ["Puerto Montt", "Ancud", "Castro", "Calbuco", "Cochamó", "Chaitén", "Chonchi", "Curaco de Vélez", "Dalcahue", "Fresia", "FruVllar", "Futaleufú", "Hualaihué", "Los Muermos", "Llanquihue", "Maullín", "Osorno", "Puerto Varas", "Puqueldón", "Puerto Octay", "Purranque", "Puyehue", "Palena", "Queilén", "Quellón", "Quemchi", "Quinchao", "Río Negro", "San Juan de la Costa", "San Pablo" ]
  },
  {
    "NombreRegion": "Región Aisén del Gral. Carlos Ibáñez del Campo",
    "comunas": ["Aisén", "Coihaique", "Cisnes", "Cochrane", "Chile Chico", "Guaitecas", "Lago Verde", "O’Higgins", "Río Ibáñez", "Tortel" ]
  },
  {
    "NombreRegion": "Región de Magallanes y de la AntárVca Chilena",
    "comunas": ["AntárVca", "Cabo de Hornos (Ex Navarino)", "Laguna Blanca", "Natales", "Punta Arenas", "Porvenir", "Primavera", "Río Verde", "San Gregorio", "Timaukel", "Torres del Paine"]
  },
  {
    "NombreRegion": "Región Metropolitana de Santiago",
    "comunas": [ "Alhué", "Buin", "Calera de Tango", "Cerrillos", "Cerro Navia", "Conchalí", "Colina", "Curacaví", "El Monte", "El Bosque", "Estación Central", "Huechuraba", "Independencia", "Isla de Maipo", "Lampa", "La Cisterna", "La Florida", "La Granja", "La Pintana", "La Reina", "Las Condes", "Lo Barnechea", "Lo Espejo", "Lo Prado", "Macul", "Maipú", "Melipilla", "María Pinto", "Ñuñoa", "Paine", "Padre Hurtado", "Peñaflor", "Pedro Aguirre Cerda", "Peñalolén", "Providencia", "Pudahuel", "Puente Alto", "Pirque", "Quilicura", "Quinta Normal", "Recoleta", "Renca", "San Joaquín", "San Miguel", "San Ramón", "San José de Maipo", "San Bernardo", "San Pedro", "TilVl", "Talagante", "Vitacura"]
  }]
}


jQuery(document).ready(function () {

  var iRegion = 0;
  var htmlRegion = '<option value="sin-region">Seleccione región</option><option value="sin-region">--</option>';
  var htmlComunas = '<option value="sin-region">Seleccione comuna</option><option value="sin-region">--</option>';

  jQuery.each(RegionesYcomunas.regiones, function () {
    htmlRegion = htmlRegion + '<option value="' + RegionesYcomunas.regiones[iRegion].NombreRegion + '">' + RegionesYcomunas.regiones[iRegion].NombreRegion + '</option>';
    iRegion++;
  });

  jQuery('#regiones').html(htmlRegion);
  jQuery('#comunas').html(htmlComunas);

  jQuery('#regiones').change(function () {
    var iRegiones = 0;
    var valorRegion = jQuery(this).val();
    var htmlComuna = '<option value="sin-comuna">Seleccione comuna</option><option value="sin-comuna">--</option>';
    jQuery.each(RegionesYcomunas.regiones, function () {
      if (RegionesYcomunas.regiones[iRegiones].NombreRegion == valorRegion) {
        var iComunas = 0;
        jQuery.each(RegionesYcomunas.regiones[iRegiones].comunas, function () {
          htmlComuna = htmlComuna + '<option value="' + RegionesYcomunas.regiones[iRegiones].comunas[iComunas] + '">' + RegionesYcomunas.regiones[iRegiones].comunas[iComunas] + '</option>';
          iComunas++;
        });
      }
      iRegiones++;
    });
    jQuery('#comunas').html(htmlComuna);
  });
  jQuery('#comunas').change(function () {
    if (jQuery(this).val() == 'sin-region') {
      alert('selecciones Región');
    } else if (jQuery(this).val() == 'sin-comuna') {
      alert('selecciones Comuna');
    }
  });
  jQuery('#regiones').change(function () {
    if (jQuery(this).val() == 'sin-region') {
      alert('selecciones Región');
    }
  });

});


function validarCampos() {
  var region = $('#regiones').val();
  var comuna = $('#comunas').val();
  var rut = $('#rut').val();
  var dig_rut = $('#dig_rut').val();
  var nombres = $('#nombres').val();
  var apellidos = $('#apellidos').val();
  var fecha_nacimiento = $('#fecha_nacimiento').val();
  var direccion = $('#direccion').val();
  var telefono = $('#telefono').val();

  if (region=='sin-region'||comuna=='sin-comuna'||rut==''||nombres==''||apellidos==''||fecha_nacimiento==''||direccion==''||telefono==''){
   alert('Debe completar todos los campos');
 } else {
  $('#guardar').submit();
  console.log('todo listo');
}
}


function validarDepartamento() {

  var region = $('#regiones').val();
  var comuna = $('#comunas').val();
  var codigo_departamento = $('#codigo_departamento').val();
  var numero = $('#numero').val();
  var direccion = $('#direccion').val();
  var habitaciones = $('#cantidad_habitaciones').val();
  var banos = $('#cantidad_banos').val();

  if (codigo_departamento==''){
    $('#codigo_departamento').focus();
    return false;
  }
  if (numero==''){
    $('#numero').focus();
    return false;
  }
  if (direccion==''){
    $('#direccion').focus();
    return false;
  }
  if (region=='sin-region'){
    $('#regiones').focus();
    return false;
  }
  if (comuna=='sin-comuna'){
    $('#comunas').focus();
    return false;
  }
  if (habitaciones==''){
    $('#cantidad_habitaciones').focus();
    return false;
  }
  if (banos==''){
    $('#cantidad_banos').focus();
    return false;
  }
  grabar();
}

function validarDepartamentoModificar() {

  var region = $('#regiones').val();
  var comuna = $('#comunas').val();
  var codigo_departamento = $('#codigo_departamento').val();
  var numero = $('#numero').val();
  var direccion = $('#direccion').val();
  var habitaciones = $('#cantidad_habitaciones').val();
  var banos = $('#cantidad_banos').val();

  if (codigo_departamento==''){
    $('#codigo_departamento').focus();
    return false;
  }
  if (numero==''){
    $('#numero').focus();
    return false;
  }
  if (direccion==''){
    $('#direccion').focus();
    return false;
  }
  if (region=='sin-region'){
    $('#regiones').focus();
    return false;
  }
  if (comuna=='sin-comuna'){
    $('#comunas').focus();
    return false;
  }
  if (habitaciones==''){
    $('#cantidad_habitaciones').focus();
    return false;
  }
  if (banos==''){
    $('#cantidad_banos').focus();
    return false;
  }
    $('#guardar').submit();
}

function limpiarFormDepartamento() 
{
  document.getElementById("regiones").value = "";
  document.getElementById("comunas").value = "";
  document.getElementById("codigo_departamento").value = "";
  document.getElementById("numero").value = "";
  document.getElementById("direccion").value = "";
  document.getElementById("cantidad_habitaciones").value = "";
  document.getElementById("cantidad_banos").value = "";
}




function valideKey(evt){

   // code is the decimal ASCII representation of the pressed key.
   var code = (evt.which) ? evt.which : evt.keyCode;
   
   if(code==8) { // backspace.
     return true;
   } else if(code>=48 && code<=57) { // is a number.
     return true;
   } else{ // other keys.
     return false;
   }
 }

function validarReserva() {

  var region = $('#regiones').val();
  var comuna = $('#comunas').val();
  var codigo_departamento = $('#cod_departamento :selected').text();
  var fecha_desde = $('#fecha_desde').val();
  var fecha_hasta = $('#fecha_hasta').val();


  if (fecha_desde==''){
    $('#fecha_desde').focus();
    return false;
  }
  if (fecha_hasta<fecha_desde){
    alert('LA FECHA DE TERMINO NO PUEDE SER ANTERIOR A LA FECHA DE INICIO');
    $('#fecha_hasta').focus();
    return false;
  }
  if (cod_departamento==''){
    $('#cod_departamento').focus();
    return false;
  }
  if (region=='sin-region'){
    $('#regiones').focus();
    return false;
  }
  if (comuna=='sin-comuna'){
    $('#comunas').focus();
    return false;
  }

  grabarReserva();
}

